<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>The Unsolved Case</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;
  background:linear-gradient(135deg,#1a1a2e,#16213e);
  color:#e0e0e0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px
}
.container{
  max-width:1100px;
  width:100%;
  background:#0f3460;
  border-radius:12px;
  display:grid;
  grid-template-columns:1fr 300px;
  overflow:hidden
}
.main-content{padding:30px}
.sidebar{
  background:#0a1e35;
  padding:20px;
  border-left:2px solid #e94560
}
h1{color:#e94560}
.room-title{color:#16c784;margin:10px 0}
.visual-clues{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:15px;
  margin-top:15px
}
.clue-image{
  background:rgba(255,255,255,.1);
  border:2px solid #16c784;
  border-radius:8px;
  height:180px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:.2s;
}
.clue-image.disabled{
  opacity:.4;
  pointer-events:none
}
.timer{
  border:2px solid #e94560;
  padding:12px;
  border-radius:8px;
  text-align:center;
  font-family:monospace;
  font-size:22px;
  margin-bottom:15px
}
input{
  padding:10px;
  border-radius:6px;
  border:2px solid #16c784;
  background:transparent;
  color:#fff;
  width:100%;
  margin-top:10px
}
button{
  padding:10px 16px;
  background:#e94560;
  border:none;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
  margin-top:12px
}
.message.success{color:#16c784;margin-top:12px}
.message.error{color:#e94560;margin-top:12px}
.hint-button{background:#16213e;color:#16c784}
.small-note{font-size:12px;opacity:.7;margin-top:5px}
</style>
</head>

<body>

<div class="container" id="gameContainer"></div>

<script>
const gameState={
  currentRoom:0,
  evidence:new Set(),
  timeRemaining:0,
  timer:null,
  uvUnlocked:false,
  hintIndex:0
};

const rooms=[
{
  title:"Room 1: The Crime Scene",
  timeLimit:300,
  story:"A diamond vanished. Some clues are hidden from plain sight.",
  visualClues:[
    {emoji:"üü£",label:"UV Lamp",description:"Invisible ink reveals: Meet at 15:30",locked:true},
    {emoji:"üïê",label:"Clock",description:"Clock shows 3:30 PM"},
    {emoji:"üîí",label:"Safe Lock",description:"4-digit safe opened during gap"},
    {emoji:"üìä",label:"Security Log",description:"Security log is empty"}
  ],
  puzzle:{question:"What time was the diamond stolen? (HH:MM)",answer:"15:30"},
  evidence:"Security Log Extract",
  hints:[
    "Some clues can‚Äôt be seen with normal light.",
    "Patience matters ‚Äî tools sometimes need time to work."
  ]
},
{
  title:"Room 2: Suspect Interrogation",
  timeLimit:180,
  story:"Study suspects and alibis.",
  visualClues:[
    {emoji:"üë®",label:"Alex",description:"Left shop at 3:15"},
    {emoji:"üëÆ",label:"Ben",description:"Watch time mismatched"},
    {emoji:"üë©",label:"Clara",description:"Call forwarded at 3:15"},
    {emoji:"üìπ",label:"Camera",description:"Blurred figure in guard jacket"}
  ],
  puzzle:{question:"Who is lying? (Alex, Ben, Clara)",answer:"clara"},
  evidence:"Phone Records",
  hints:["Compare timelines carefully"]
}
];

function formatTime(s){
  const m=Math.floor(s/60), sec=s%60;
  return `${m}:${sec<10?"0":""}${sec}`;
}

function startGame(){ loadRoom(0); }

function loadRoom(i){
  gameState.currentRoom=i;
  gameState.timeRemaining=rooms[i].timeLimit;
  gameState.hintIndex=0;
  gameState.uvUnlocked=false;

  document.getElementById("gameContainer").innerHTML=`
    <div class="main-content">
      <h1>üîç The Unsolved Case</h1>
      <div class="room-title">${rooms[i].title}</div>
      <div class="timer" id="timerDisplay"></div>
      <p>${rooms[i].story}</p>

      <div class="visual-clues">
        ${rooms[i].visualClues.map((c,idx)=>`
          <div class="clue-image ${c.locked?"disabled":""}" id="clue-${idx}"
               onclick="openClue(${idx})">
            <div style="font-size:60px">${c.emoji}</div>
            <div>${c.label}</div>
            ${c.locked?'<div class="small-note">Reveals in 1 min</div>':""}
          </div>`).join("")}
      </div>

      <p style="margin-top:20px">${rooms[i].puzzle.question}</p>
      <input id="answerInput">
      <button onclick="submitAnswer()">Submit</button>
      <button class="hint-button" onclick="showHint()">üí° Hint</button>
      <div id="hintMsg"></div>
      <div id="message"></div>
    </div>
  `;

  startTimer();

  if(i===0){
    setTimeout(()=>{
      gameState.uvUnlocked=true;
      document.getElementById("clue-0").classList.remove("disabled");
    },60000);
  }
}

function startTimer(){
  clearInterval(gameState.timer);
  gameState.timer=setInterval(()=>{
    gameState.timeRemaining--;
    document.getElementById("timerDisplay").textContent=
      `‚è± ${formatTime(gameState.timeRemaining)}`;
  },1000);
}

function showHint(){
  const r=rooms[gameState.currentRoom];
  const hintBox=document.getElementById("hintMsg");

  if(gameState.hintIndex < r.hints.length){
    hintBox.textContent=r.hints[gameState.hintIndex];
    gameState.hintIndex++;
  }else{
    hintBox.textContent="No more hints available.";
  }
}

function openClue(idx){
  const c=rooms[gameState.currentRoom].visualClues[idx];
  if(c.locked && !gameState.uvUnlocked) return;
  alert(c.description);
}

function submitAnswer(){
  const v=document.getElementById("answerInput").value.trim();
  const r=rooms[gameState.currentRoom];
  const m=document.getElementById("message");

  if(v===r.puzzle.answer){
    m.className="message success";
    m.textContent="Correct!";
  }else{
    m.className="message error";
    m.textContent="Incorrect!";
  }
}

startGame();
</script>

</body>
</html>
